<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Class AgentContext </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Class AgentContext ">
    
    <meta name="description" content="Represents the context of an agent, including its system prompt, conversation history, and context fields. The context manages token limits by removing older messages when needed to stay within the maximum token count.">
      <link rel="shortcut icon" href="../favicon.ico">
      <link rel="stylesheet" href="../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../styles/docfx.css">
      <link rel="stylesheet" href="../styles/main.css">
      <meta property="docfx:navrel" content="../toc.html">
      <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="VulcanAI.Core.Agent.AgentContext">



  <h1 id="VulcanAI_Core_Agent_AgentContext" data-uid="VulcanAI.Core.Agent.AgentContext" class="text-break">Class AgentContext</h1>
  <div class="markdown level0 summary"><p>Represents the context of an agent, including its system prompt, conversation history, and context fields.
The context manages token limits by removing older messages when needed to stay within the maximum token count.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
    <div class="level1"><span class="xref">AgentContext</span></div>
  </div>
  <div class="inheritedMembers">
    <h5>Inherited Members</h5>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </div>
  <h6><strong>Namespace</strong>: <a class="xref" href="VulcanAI.html">VulcanAI</a>.<a class="xref" href="VulcanAI.Core.html">Core</a>.<a class="xref" href="VulcanAI.Core.Agent.html">Agent</a></h6>
  <h6><strong>Assembly</strong>: VulcanAI.dll</h6>
  <h5 id="VulcanAI_Core_Agent_AgentContext_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class AgentContext</code></pre>
  </div>
  <h3 id="constructors">Constructors
</h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext__ctor_System_String_Microsoft_Extensions_Logging_ILogger_VulcanAI_Core_Agent_AgentContext__System_Collections_Generic_Dictionary_System_String_System_String__.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.%23ctor(System.String%2CMicrosoft.Extensions.Logging.ILogger%7BVulcanAI.Core.Agent.AgentContext%7D%2CSystem.Collections.Generic.Dictionary%7BSystem.String%2CSystem.String%7D)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L74">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext__ctor_" data-uid="VulcanAI.Core.Agent.AgentContext.#ctor*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext__ctor_System_String_Microsoft_Extensions_Logging_ILogger_VulcanAI_Core_Agent_AgentContext__System_Collections_Generic_Dictionary_System_String_System_String__" data-uid="VulcanAI.Core.Agent.AgentContext.#ctor(System.String,Microsoft.Extensions.Logging.ILogger{VulcanAI.Core.Agent.AgentContext},System.Collections.Generic.Dictionary{System.String,System.String})">AgentContext(string, ILogger&lt;AgentContext&gt;, Dictionary&lt;string, string&gt;?)</h4>
  <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="VulcanAI.Core.Agent.AgentContext.html">AgentContext</a> class.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public AgentContext(string systemPrompt, ILogger&lt;AgentContext&gt; logger, Dictionary&lt;string, string&gt;? initialContextFields = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td><span class="parametername">systemPrompt</span></td>
        <td><p>The system prompt that defines the agent's behavior and personality.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.extensions.logging.ilogger-1">ILogger</a>&lt;<a class="xref" href="VulcanAI.Core.Agent.AgentContext.html">AgentContext</a>&gt;</td>
        <td><span class="parametername">logger</span></td>
        <td><p>The logger instance for recording diagnostic information.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.dictionary-2">Dictionary</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a>&gt;</td>
        <td><span class="parametername">initialContextFields</span></td>
        <td><p>Optional initial context fields for the agent.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext__ctor_System_String_Microsoft_Extensions_Logging_ILogger_VulcanAI_Core_Agent_AgentContext__System_Collections_Generic_Dictionary_System_String_System_String___remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The system prompt is required and cannot be changed after creation.
Context fields can be added, modified, or removed at any time.</p>
</div>
  <h3 id="properties">Properties
</h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_ContextFields.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.ContextFields%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L62">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_ContextFields_" data-uid="VulcanAI.Core.Agent.AgentContext.ContextFields*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_ContextFields" data-uid="VulcanAI.Core.Agent.AgentContext.ContextFields">ContextFields</h4>
  <div class="markdown level1 summary"><p>Gets the context fields as a read-only dictionary.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IReadOnlyDictionary&lt;string, string&gt; ContextFields { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ireadonlydictionary-2">IReadOnlyDictionary</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a>&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_ContextFields_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Context fields are used to store additional information that can be referenced
in prompts and responses. They are always included in the context and are not
affected by the token limit.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_ConversationHistory.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.ConversationHistory%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L52">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_ConversationHistory_" data-uid="VulcanAI.Core.Agent.AgentContext.ConversationHistory*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_ConversationHistory" data-uid="VulcanAI.Core.Agent.AgentContext.ConversationHistory">ConversationHistory</h4>
  <div class="markdown level1 summary"><p>Gets the conversation history as a read-only array of messages.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Message[] ConversationHistory { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="VulcanAI.Core.Connectors.Message.html">Message</a>[]</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_ConversationHistory_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The conversation history includes all messages sent and received by the agent.
When serializing to JSON, older messages may be removed to stay within the token limit.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_MaxTokens.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.MaxTokens%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L34">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_MaxTokens_" data-uid="VulcanAI.Core.Agent.AgentContext.MaxTokens*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_MaxTokens" data-uid="VulcanAI.Core.Agent.AgentContext.MaxTokens">MaxTokens</h4>
  <div class="markdown level1 summary"><p>Gets or sets the maximum number of tokens allowed in the context.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int MaxTokens { get; set; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_MaxTokens_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This value is used to limit the size of the context when serializing to JSON.
When the context exceeds this limit, older messages are removed from the conversation history
until the context is within the limit. The default value is 4096 tokens.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_SystemPrompt.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.SystemPrompt%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L43">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_SystemPrompt_" data-uid="VulcanAI.Core.Agent.AgentContext.SystemPrompt*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_SystemPrompt" data-uid="VulcanAI.Core.Agent.AgentContext.SystemPrompt">SystemPrompt</h4>
  <div class="markdown level1 summary"><p>Gets the system prompt that defines the agent's behavior and personality.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public string SystemPrompt { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_SystemPrompt_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The system prompt is always included in the context and is not affected by the token limit.
It should be concise but descriptive enough to guide the agent's behavior.</p>
</div>
  <h3 id="methods">Methods
</h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_AddMessage_VulcanAI_Core_Connectors_Message_.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.AddMessage(VulcanAI.Core.Connectors.Message)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L90">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_AddMessage_" data-uid="VulcanAI.Core.Agent.AgentContext.AddMessage*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_AddMessage_VulcanAI_Core_Connectors_Message_" data-uid="VulcanAI.Core.Agent.AgentContext.AddMessage(VulcanAI.Core.Connectors.Message)">AddMessage(Message)</h4>
  <div class="markdown level1 summary"><p>Adds a message to the conversation history.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void AddMessage(Message message)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="VulcanAI.Core.Connectors.Message.html">Message</a></td>
        <td><span class="parametername">message</span></td>
        <td><p>The message to add.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_AddMessage_VulcanAI_Core_Connectors_Message__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Messages are added to the end of the conversation history.
When serializing to JSON, older messages may be removed to stay within the token limit.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_FromJson_System_String_Microsoft_Extensions_Logging_ILogger_VulcanAI_Core_Agent_AgentContext__.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.FromJson(System.String%2CMicrosoft.Extensions.Logging.ILogger%7BVulcanAI.Core.Agent.AgentContext%7D)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L205">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_FromJson_" data-uid="VulcanAI.Core.Agent.AgentContext.FromJson*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_FromJson_System_String_Microsoft_Extensions_Logging_ILogger_VulcanAI_Core_Agent_AgentContext__" data-uid="VulcanAI.Core.Agent.AgentContext.FromJson(System.String,Microsoft.Extensions.Logging.ILogger{VulcanAI.Core.Agent.AgentContext})">FromJson(string, ILogger&lt;AgentContext&gt;)</h4>
  <div class="markdown level1 summary"><p>Creates a new context from a JSON string.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static AgentContext FromJson(string json, ILogger&lt;AgentContext&gt; logger)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td><span class="parametername">json</span></td>
        <td><p>The JSON string to deserialize.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.extensions.logging.ilogger-1">ILogger</a>&lt;<a class="xref" href="VulcanAI.Core.Agent.AgentContext.html">AgentContext</a>&gt;</td>
        <td><span class="parametername">logger</span></td>
        <td><p>The logger instance for recording diagnostic information.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="VulcanAI.Core.Agent.AgentContext.html">AgentContext</a></td>
        <td><p>A new instance of <a class="xref" href="VulcanAI.Core.Agent.AgentContext.html">AgentContext</a> with the deserialized data.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_FromJson_System_String_Microsoft_Extensions_Logging_ILogger_VulcanAI_Core_Agent_AgentContext___remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The JSON string should be in the format produced by the <a class="xref" href="VulcanAI.Core.Agent.AgentContext.html#VulcanAI_Core_Agent_AgentContext_ToJson">ToJson()</a> method.
The deserialized context will have the same system prompt, context fields, and conversation history
as the original context, subject to the token limit.</p>
</div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.invalidoperationexception">InvalidOperationException</a></td>
        <td><p>Thrown when the JSON cannot be deserialized into an AgentContext.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_GetContextField_System_String_.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.GetContextField(System.String)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L119">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_GetContextField_" data-uid="VulcanAI.Core.Agent.AgentContext.GetContextField*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_GetContextField_System_String_" data-uid="VulcanAI.Core.Agent.AgentContext.GetContextField(System.String)">GetContextField(string)</h4>
  <div class="markdown level1 summary"><p>Gets a context field value.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public string? GetContextField(string key)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td><span class="parametername">key</span></td>
        <td><p>The key of the context field.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td><p>The value of the context field, or null if not found.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_GetContextField_System_String__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Context fields are used to store additional information that can be referenced
in prompts and responses. They are always included in the context and are not
affected by the token limit.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_GetTokenCount_System_String_.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.GetTokenCount(System.String)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L285">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_GetTokenCount_" data-uid="VulcanAI.Core.Agent.AgentContext.GetTokenCount*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_GetTokenCount_System_String_" data-uid="VulcanAI.Core.Agent.AgentContext.GetTokenCount(System.String)">GetTokenCount(string)</h4>
  <div class="markdown level1 summary"><p>Calculates the token count for a given text string.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int GetTokenCount(string text)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td><span class="parametername">text</span></td>
        <td><p>The text to calculate tokens for.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></td>
        <td><p>The number of tokens in the text.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_GetTokenCount_System_String__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method uses a more accurate token estimation based on the actual tokenization used by language models:</p>
<ul>
<li>Words are split into subwords using common patterns</li>
<li>Punctuation is generally part of the same token as the word</li>
<li>Numbers are generally part of the same token as the word</li>
<li>Special characters and whitespace are counted separately</li>
</ul>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_GetTokenCount_VulcanAI_Core_AgentContextData_.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.GetTokenCount(VulcanAI.Core.AgentContextData)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L342">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_GetTokenCount_" data-uid="VulcanAI.Core.Agent.AgentContext.GetTokenCount*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_GetTokenCount_VulcanAI_Core_AgentContextData_" data-uid="VulcanAI.Core.Agent.AgentContext.GetTokenCount(VulcanAI.Core.AgentContextData)">GetTokenCount(AgentContextData)</h4>
  <div class="markdown level1 summary"><p>Calculates the token count for a given context data object.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int GetTokenCount(AgentContextData contextData)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="VulcanAI.Core.AgentContextData.html">AgentContextData</a></td>
        <td><span class="parametername">contextData</span></td>
        <td><p>The context data to calculate tokens for.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></td>
        <td><p>The total number of tokens in the context data.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_GetTokenCount_VulcanAI_Core_AgentContextData__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>This method calculates tokens for:</p>
<ol>
<li>The system prompt</li>
<li>All context fields (key + value)</li>
<li>All messages in the conversation history</li>
<li>JSON structure overhead (estimated based on actual JSON structure)</li>
</ol>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_RemoveContextField_System_String_.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.RemoveContextField(System.String)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L134">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_RemoveContextField_" data-uid="VulcanAI.Core.Agent.AgentContext.RemoveContextField*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_RemoveContextField_System_String_" data-uid="VulcanAI.Core.Agent.AgentContext.RemoveContextField(System.String)">RemoveContextField(string)</h4>
  <div class="markdown level1 summary"><p>Removes a context field.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool RemoveContextField(string key)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td><span class="parametername">key</span></td>
        <td><p>The key of the context field to remove.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></td>
        <td><p>True if the field was removed, false if it didn't exist.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_RemoveContextField_System_String__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Context fields are used to store additional information that can be referenced
in prompts and responses. They are always included in the context and are not
affected by the token limit.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_SetContextField_System_String_System_String_.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.SetContextField(System.String%2CSystem.String)%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L104">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_SetContextField_" data-uid="VulcanAI.Core.Agent.AgentContext.SetContextField*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_SetContextField_System_String_System_String_" data-uid="VulcanAI.Core.Agent.AgentContext.SetContextField(System.String,System.String)">SetContextField(string, string)</h4>
  <div class="markdown level1 summary"><p>Sets a context field value.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void SetContextField(string key, string value)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td><span class="parametername">key</span></td>
        <td><p>The key of the context field.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td><span class="parametername">value</span></td>
        <td><p>The value to set.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_SetContextField_System_String_System_String__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>If the key already exists, its value will be updated.
Context fields are always included in the context and are not affected by the token limit.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext_ToJson.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext.ToJson%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Edit this page</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L151">View Source</a>
  </span>
  <a id="VulcanAI_Core_Agent_AgentContext_ToJson_" data-uid="VulcanAI.Core.Agent.AgentContext.ToJson*"></a>
  <h4 id="VulcanAI_Core_Agent_AgentContext_ToJson" data-uid="VulcanAI.Core.Agent.AgentContext.ToJson">ToJson()</h4>
  <div class="markdown level1 summary"><p>Serializes the context to a JSON string, respecting the maximum token limit.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="declaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public string ToJson()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></td>
        <td><p>A JSON string representing the context, with older messages removed if necessary to stay within token limits.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="VulcanAI_Core_Agent_AgentContext_ToJson_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The serialized context includes:</p>
<ol>
<li>The system prompt</li>
<li>Any context fields</li>
<li>The conversation history (with older messages removed if needed to stay within token limits)
The token limit is enforced by removing older messages from the conversation history
until the context is within the limit. The system prompt and context fields are always included.</li>
</ol>
</div>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/StevenGann/VulcanAI/new/main/apiSpec/new?filename=VulcanAI_Core_Agent_AgentContext.md&amp;value=---%0Auid%3A%20VulcanAI.Core.Agent.AgentContext%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A" class="contribution-link">Edit this page</a>
                  </li>
                  <li>
                    <a href="https://github.com/StevenGann/VulcanAI/blob/main/VulcanAI/Core/Agent/AgentContext.cs/#L20" class="contribution-link">View Source</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
